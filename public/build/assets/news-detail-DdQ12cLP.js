import{a as N}from"./index-t--hEgTQ.js";import{K as R,L as j,aa as F,ab as z,ac as E,ad as M,ae as U,a7 as K,A as q,a8 as G,S as H,i as s,m as J,af as O,ag as Q,ah as W,d as X,b as d,e as D,u as Y,F as Z,_ as ee,c as k,w as n,h as T,o as w,j as P,D as ae,x as te,l as y,t as C,y as oe,C as L,v as ne}from"./main-_i2oXPUW.js";import{D as se,a as _,b as x,V as re,c as le}from"./DefaultLayout-C6N_xnTo.js";import{B as ie,u as ue}from"./useAuth-CRufrW3H.js";import{V as de}from"./VSnackbar-Btlxh5Q0.js";const ce={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function me(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return s("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[a])}function I(e){const[a,t]=e.split("@");return Array.from({length:t}).map(()=>V(a))}function V(e){let a=[];if(!e)return a;const t=ce[e];if(e!==t){if(e.includes(","))return $(e);if(e.includes("@"))return I(e);t.includes(",")?a=$(t):t.includes("@")?a=I(t):t&&a.push(V(t))}return[me(e,a)]}function $(e){return e.replace(/\s/g,"").split(",").map(V)}const ge=j({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...W(),...Q(),...O()},"VSkeletonLoader"),pe=R()({name:"VSkeletonLoader",props:ge(),setup(e,a){let{slots:t}=a;const{backgroundColorClasses:c,backgroundColorStyles:m}=F(z(e,"color")),{dimensionStyles:l}=E(e),{elevationClasses:i}=M(e),{themeClasses:u}=U(e),{t:r}=K(),h=q(()=>V(G(e.type).join(",")));return H(()=>{var p;const g=!t.default||e.loading,b=e.boilerplate||!g?{}:{ariaLive:"polite",ariaLabel:r(e.loadingText),role:"alert"};return s("div",J({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},u.value,c.value,i.value],style:[m.value,g?l.value:{}]},b),[g?h.value:(p=t.default)==null?void 0:p.call(t)])}),{}}}),fe=X({name:"NewsDetail",components:{DefaultLayout:se,BaseButton:ie},setup(){const e=Z(),a=Y(),{logout:t,isAdmin:c}=ue(),m=d(null),l=d(!1),i=d(!1),u=d(""),r=d("success"),h=d(c.value?_:x);D(c,o=>{h.value=o?_:x});const g=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),b=(o,f="success")=>{u.value=o,r.value=f,i.value=!0},p=async()=>{var o,f,B;l.value=!0;try{const v=e.params.id,A=await N.get(`/api/news/${v}`,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});m.value=A.data}catch(v){if(console.error("Failed to fetch news detail:",v),((o=v.response)==null?void 0:o.status)===401){S();return}b(((B=(f=v.response)==null?void 0:f.data)==null?void 0:B.message)||"Failed to fetch news detail","error")}finally{l.value=!1}},S=async()=>{try{await t(),a.push({name:"Login"})}catch(o){console.error("Logout failed:",o)}};return(async()=>{if(!localStorage.getItem("auth_token")){b("Please login to continue","error"),a.push({name:"Login"});return}await p()})(),D(()=>e.params.id,()=>{p()}),{menuItems:h,news:m,loading:l,snackbar:i,snackbarText:u,snackbarColor:r,handleLogout:S,formatDate:g}}});function ve(e,a,t,c,m,l){const i=T("BaseButton"),u=T("default-layout");return w(),k(u,{title:"News Detail","menu-items":e.menuItems,onLogout:e.handleLogout},{default:n(()=>[s(re,null,{default:n(()=>[s(le,{cols:"12"},{default:n(()=>[e.news?(w(),k(ae,{key:0,class:"dashboard-card",elevation:"3"},{default:n(()=>[s(te,null,{default:n(()=>[y(C(e.news.title),1)]),_:1}),s(oe,null,{default:n(()=>[e.news.image_url?(w(),k(ne,{key:0,src:e.news.image_url,height:"300",cover:"",class:"mb-4"},null,8,["src"])):P("",!0),L("p",null,C(e.news.content),1),L("p",null,[a[2]||(a[2]=L("strong",null,"Published on:",-1)),y(" "+C(e.formatDate(e.news.created_at)),1)])]),_:1})]),_:1})):e.loading?(w(),k(pe,{key:1,type:"article"})):P("",!0)]),_:1})]),_:1}),s(de,{modelValue:e.snackbar,"onUpdate:modelValue":a[1]||(a[1]=r=>e.snackbar=r),color:e.snackbarColor,timeout:3e3,location:"top",vertical:""},{actions:n(()=>[s(i,{color:"white",variant:"text",onClick:a[0]||(a[0]=r=>e.snackbar=!1)},{default:n(()=>a[3]||(a[3]=[y(" Close ")])),_:1})]),default:n(()=>[y(C(e.snackbarText)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["menu-items","onLogout"])}const Ve=ee(fe,[["render",ve],["__scopeId","data-v-e2171cbc"]]);export{Ve as default};
