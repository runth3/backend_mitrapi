{
    "openapi": "3.0.0",
    "info": {
        "title": "API Mitrakab",
        "description": "Dokumentasi API untuk Mitrakab",
        "contact": {
            "email": "support@mitrakab.go.id"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0.0"
    },
    "paths": {
        "/api/attendances/me": {
            "get": {
                "tags": [
                    "Attendances"
                ],
                "summary": "Get current month's attendance for authenticated user",
                "description": "Retrieves the attendance records for the current month for the authenticated user. Requires authentication.",
                "operationId": "0ee9c592015795d79b770a0326a50798",
                "parameters": [
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "month": {
                                                    "type": "string",
                                                    "example": "2025-04"
                                                },
                                                "attendances": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/AttendanceResource"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Monthly attendance retrieved successfully"
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 20
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "example": 100
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 5
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 20
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "User not authenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not authenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to retrieve monthly attendance",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Failed to retrieve monthly attendance"
                                        },
                                        "details": {
                                            "type": "string",
                                            "example": "Error message"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attendances/check-in": {
            "post": {
                "tags": [
                    "Attendances"
                ],
                "summary": "Record an automatic check-in",
                "description": "Records an automatic check-in for the authenticated user. Requires authentication.",
                "operationId": "07fd47491944caa69a6a2522140b5ad6",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "coordinate",
                                    "altitude",
                                    "checktype",
                                    "jenis_absensi"
                                ],
                                "properties": {
                                    "coordinate": {
                                        "type": "string",
                                        "example": "-6.175392,106.827153"
                                    },
                                    "altitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 10.5
                                    },
                                    "checktype": {
                                        "type": "string",
                                        "enum": [
                                            "IN",
                                            "OUT"
                                        ],
                                        "example": "IN"
                                    },
                                    "jenis_absensi": {
                                        "type": "string",
                                        "enum": [
                                            "REGULER",
                                            "MANUAL"
                                        ],
                                        "example": "REGULER"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Check-in successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/AttendanceResource"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Check-in successful"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input or already checked in",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid input"
                                        },
                                        "details": {
                                            "properties": {
                                                "coordinate": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "User not authenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not authenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "User data not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User data not found in DataPegawaiAbsen"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to process check-in",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Failed to process check-in"
                                        },
                                        "details": {
                                            "type": "string",
                                            "example": "Error message"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attendances/manual-check-in": {
            "post": {
                "tags": [
                    "Attendances"
                ],
                "summary": "Record a manual check-in",
                "description": "Records a manual check-in for the authenticated user. Requires authentication.",
                "operationId": "b67c8361d604434dc1c9511669d4df8d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "date",
                                    "checktime",
                                    "coordinate",
                                    "altitude",
                                    "checktype",
                                    "jenis_absensi"
                                ],
                                "properties": {
                                    "date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-04-25"
                                    },
                                    "checktime": {
                                        "type": "string",
                                        "format": "date-time",
                                        "example": "2025-04-25 09:00:00"
                                    },
                                    "coordinate": {
                                        "type": "string",
                                        "example": "-6.175392,106.827153"
                                    },
                                    "altitude": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 10.5
                                    },
                                    "checktype": {
                                        "type": "string",
                                        "enum": [
                                            "IN",
                                            "OUT"
                                        ],
                                        "example": "IN"
                                    },
                                    "jenis_absensi": {
                                        "type": "string",
                                        "enum": [
                                            "REGULER",
                                            "MANUAL"
                                        ],
                                        "example": "MANUAL"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Manual check-in successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/AttendanceResource"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Manual check-in successful"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input or already checked in",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid input"
                                        },
                                        "details": {
                                            "properties": {
                                                "date": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "User not authenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not authenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "User data not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User data not found in DataPegawaiAbsen"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to process manual check-in",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Failed to process manual check-in"
                                        },
                                        "details": {
                                            "type": "string",
                                            "example": "Error message"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attendances/{id}/approve-or-reject": {
            "post": {
                "tags": [
                    "Attendances"
                ],
                "summary": "Approve or reject a manual attendance record",
                "description": "Approves or rejects a manual attendance record by its ID. Requires authentication.",
                "operationId": "a4086ae17a5f80497d8ff4ffed8801ae",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "ID of the attendance record",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "status"
                                ],
                                "properties": {
                                    "status": {
                                        "type": "string",
                                        "enum": [
                                            "Y",
                                            "N"
                                        ],
                                        "example": "Y"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Approval/rejection successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "$ref": "#/components/schemas/AttendanceResource"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Manual attendance approved successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input or not a manual check-in",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid input"
                                        },
                                        "details": {
                                            "properties": {
                                                "status": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "User not authenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not authenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Attendance not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Attendance not found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to process approval/rejection",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Failed to process approval/rejection"
                                        },
                                        "details": {
                                            "type": "string",
                                            "example": "Error message"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attendances/manual": {
            "get": {
                "tags": [
                    "Attendances"
                ],
                "summary": "List manual attendance records by approval status",
                "description": "Retrieves a list of manual attendance records filtered by their approval status. Requires authentication.",
                "operationId": "02e15aa5684c3b80f0381b4c30e42613",
                "parameters": [
                    {
                        "name": "status",
                        "in": "query",
                        "description": "Approval status to filter by (Y for approved, N for not approved)",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "Y",
                                "N"
                            ]
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Number of items per page",
                        "schema": {
                            "type": "integer",
                            "default": 20
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/AttendanceResource"
                                            }
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Manual attendance list retrieved successfully"
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_page": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "per_page": {
                                                    "type": "integer",
                                                    "example": 20
                                                },
                                                "total": {
                                                    "type": "integer",
                                                    "example": 50
                                                },
                                                "last_page": {
                                                    "type": "integer",
                                                    "example": 3
                                                },
                                                "from": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "to": {
                                                    "type": "integer",
                                                    "example": 20
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid input"
                                        },
                                        "details": {
                                            "properties": {
                                                "status": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "User not authenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not authenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to retrieve manual attendance list",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Failed to retrieve manual attendance list"
                                        },
                                        "details": {
                                            "type": "string",
                                            "example": "Error message"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/attendances/upload-photo": {
            "post": {
                "tags": [
                    "Attendances"
                ],
                "summary": "Upload a photo for attendance",
                "description": "Uploads a photo related to an attendance record. Requires authentication.",
                "operationId": "ceee4411edd60586473a6b45b2aa5a06",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "photo",
                                    "checktype"
                                ],
                                "properties": {
                                    "photo": {
                                        "description": "Image file to upload",
                                        "type": "file"
                                    },
                                    "checktype": {
                                        "type": "string",
                                        "enum": [
                                            "auto",
                                            "manual"
                                        ],
                                        "example": "auto"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Photo uploaded successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "file_path": {
                                                    "type": "string",
                                                    "example": "absen/2025-04-25/12345-A-1650888000.jpg"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Photo uploaded successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid input"
                                        },
                                        "details": {
                                            "properties": {
                                                "photo": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "User not authenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not authenticated"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to upload photo",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Failed to upload photo"
                                        },
                                        "details": {
                                            "type": "string",
                                            "example": "Error message"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/login": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Authenticate user and get token",
                "description": "Authenticates a user using username and password and returns an access token and refresh token. Requires the X-Device-ID header.",
                "operationId": "8dcb70df1020986038d098cc08d05dae",
                "requestBody": {
                    "description": "User credentials",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "username",
                                    "password"
                                ],
                                "properties": {
                                    "username": {
                                        "type": "string",
                                        "example": "johndoe"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "secret"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful authentication",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "access_token": {
                                                    "type": "string",
                                                    "example": "eyJ..."
                                                },
                                                "token_type": {
                                                    "type": "string",
                                                    "example": "Bearer"
                                                },
                                                "refresh_token": {
                                                    "type": "string",
                                                    "example": "eyJ..."
                                                },
                                                "user": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "username": {
                                                            "type": "string",
                                                            "example": "johndoe"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "example": "johndoe@example.com"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "expires_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-05-02T10:00:00+00:00"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "error": {
                                            "type": "null"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Login successful"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input or missing Device ID",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 400
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Invalid input. Please check your username and password."
                                                },
                                                "details": {
                                                    "properties": {
                                                        "username": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "password": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "device_id": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid input. Please check your username and password."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid login credentials",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 401
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Invalid login credentials."
                                                },
                                                "details": {
                                                    "type": "null"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid login credentials."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Too many login attempts",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 429
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Too many login attempts. Please try again later."
                                                },
                                                "details": {
                                                    "properties": {
                                                        "retry_after": {
                                                            "type": "integer",
                                                            "example": 60
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "properties": {
                                                "retry_after": {
                                                    "type": "integer",
                                                    "example": 60
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Too many login attempts. Please try again later."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/refresh-token": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Refresh access token",
                "description": "Refreshes an expired access token using a valid refresh token. Requires the X-Device-ID header.",
                "operationId": "8c43c0a23e97bb27b0522e10907d6867",
                "requestBody": {
                    "description": "Refresh token",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "refresh_token"
                                ],
                                "properties": {
                                    "refresh_token": {
                                        "type": "string",
                                        "example": "eyJ..."
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token refreshed successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "access_token": {
                                                    "type": "string",
                                                    "example": "eyJ..."
                                                },
                                                "token_type": {
                                                    "type": "string",
                                                    "example": "Bearer"
                                                },
                                                "refresh_token": {
                                                    "type": "string",
                                                    "example": "eyJ..."
                                                },
                                                "expires_at": {
                                                    "type": "string",
                                                    "format": "date-time",
                                                    "example": "2025-05-02T10:00:00+00:00"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "error": {
                                            "type": "null"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Token refreshed successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid input or missing Device ID",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 400
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Invalid input. Please provide a valid refresh token."
                                                },
                                                "details": {
                                                    "properties": {
                                                        "refresh_token": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        },
                                                        "device_id": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid input. Please provide a valid refresh token."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid or expired refresh token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 401
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Invalid or expired refresh token. Please login again."
                                                },
                                                "details": {
                                                    "type": "null"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Invalid or expired refresh token. Please login again."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "User not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 404
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "User not found."
                                                },
                                                "details": {
                                                    "type": "null"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/auth/logout": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Logout user",
                "description": "Invalidates the current access token and refresh token for the authenticated user.",
                "operationId": "69281b12abb272c76871f19cb17ca563",
                "responses": {
                    "200": {
                        "description": "Logged out successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "type": "null"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Logged out successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 401
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                },
                                                "details": {
                                                    "type": "null"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthorized"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/api/auth/validate-token": {
            "post": {
                "tags": [
                    "Auth"
                ],
                "summary": "Validate access token",
                "description": "Validates an access token provided in the Authorization: Bearer <token> header. Requires the X-Device-ID header for device validation.",
                "operationId": "110cd050bf7ab4e8e78948e5f57952d4",
                "responses": {
                    "200": {
                        "description": "Token is valid",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "success"
                                        },
                                        "data": {
                                            "properties": {
                                                "is_valid": {
                                                    "type": "boolean",
                                                    "example": true
                                                },
                                                "user": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 1
                                                        },
                                                        "username": {
                                                            "type": "string",
                                                            "example": "johndoe"
                                                        },
                                                        "email": {
                                                            "type": "string",
                                                            "example": "johndoe@example.com"
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "token": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "string",
                                                            "example": "abcdef123456"
                                                        },
                                                        "expires_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-05-02T10:00:00+00:00",
                                                            "nullable": true
                                                        },
                                                        "last_used_at": {
                                                            "type": "string",
                                                            "format": "date-time",
                                                            "example": "2025-04-25T15:20:00+00:00",
                                                            "nullable": true
                                                        },
                                                        "device_id": {
                                                            "type": "string",
                                                            "example": "device123",
                                                            "nullable": true
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "error": {
                                            "type": "null"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Token is valid"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Device ID is required or invalid",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 400
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Device ID is required. Please include X-Device-ID in the request header."
                                                },
                                                "details": {
                                                    "properties": {
                                                        "device_id": {
                                                            "type": "array",
                                                            "items": {
                                                                "type": "string"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Device ID is required. Please include X-Device-ID in the request header."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - No token, invalid token, or device mismatch",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 401
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "No token provided. Please include a valid Bearer token."
                                                },
                                                "details": {
                                                    "type": "null"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "properties": {
                                                "current_device_id": {
                                                    "type": "string",
                                                    "example": "deviceABC",
                                                    "nullable": true
                                                },
                                                "expected_device_id": {
                                                    "type": "string",
                                                    "example": "deviceXYZ",
                                                    "nullable": true
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "No token provided. Please include a valid Bearer token."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "User not found for this token",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 404
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "User not found for this token."
                                                },
                                                "details": {
                                                    "type": "null"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "User not found for this token."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal server error during token validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "string",
                                            "example": "error"
                                        },
                                        "data": {
                                            "type": "null"
                                        },
                                        "error": {
                                            "properties": {
                                                "code": {
                                                    "type": "integer",
                                                    "example": 500
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Failed to validate token due to an internal error. Please try again."
                                                },
                                                "details": {
                                                    "properties": {
                                                        "exception": {
                                                            "type": "string",
                                                            "example": "..."
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "meta": {
                                            "type": "null"
                                        },
                                        "last_updated": {
                                            "type": "string",
                                            "format": "date-time",
                                            "example": "2025-04-25T15:25:00+00:00"
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Failed to validate token due to an internal error. Please try again."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "AttendanceResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 1
                    },
                    "id_checkinout": {
                        "type": "string",
                        "example": "ABC123XYZ"
                    },
                    "nip_pegawai": {
                        "type": "string",
                        "example": "199001012020121001"
                    },
                    "id_instansi": {
                        "type": "integer",
                        "example": 1
                    },
                    "id_unit_kerja": {
                        "type": "integer",
                        "example": 10
                    },
                    "id_profile": {
                        "type": "integer",
                        "example": 100
                    },
                    "date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-04-25"
                    },
                    "checktime": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-04-25T08:00:00+08:00",
                        "nullable": true
                    },
                    "checktype": {
                        "type": "string",
                        "example": "IN"
                    },
                    "iplog": {
                        "type": "string",
                        "example": "192.168.1.1",
                        "nullable": true
                    },
                    "coordinate": {
                        "type": "string",
                        "example": "-6.175392,106.827153",
                        "nullable": true
                    },
                    "altitude": {
                        "type": "number",
                        "format": "float",
                        "example": 10.5,
                        "nullable": true
                    },
                    "jenis_absensi": {
                        "type": "string",
                        "example": "REGULER",
                        "nullable": true
                    },
                    "user_platform": {
                        "type": "string",
                        "example": "Android",
                        "nullable": true
                    },
                    "browser_name": {
                        "type": "string",
                        "example": "Android App",
                        "nullable": true
                    },
                    "browser_version": {
                        "type": "string",
                        "example": "1.0.0",
                        "nullable": true
                    },
                    "aprv_stats": {
                        "type": "string",
                        "example": "Y",
                        "nullable": true
                    },
                    "aprv_by": {
                        "type": "string",
                        "example": "admin",
                        "nullable": true
                    },
                    "aprv_on": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-04-25T08:15:00+08:00",
                        "nullable": true
                    },
                    "reject_by": {
                        "type": "string",
                        "example": null,
                        "nullable": true
                    },
                    "reject_on": {
                        "type": "string",
                        "format": "date-time",
                        "example": null,
                        "nullable": true
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-04-25T07:55:00+08:00",
                        "nullable": true
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-04-25T08:00:00+08:00",
                        "nullable": true
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "Enter token in format (Bearer <token>)"
            }
        }
    },
    "tags": [
        {
            "name": "Attendances",
            "description": "Operations related to user attendance"
        },
        {
            "name": "Auth",
            "description": "Operations related to user authentication"
        }
    ],
    "security": [
        {
            "bearerAuth": []
        }
    ]
}